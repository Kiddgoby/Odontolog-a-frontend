<div class="new-appointment-form">
  <div class="modal-header">
    <h3>Nueva Cita</h3>
    <button class="close-btn" (click)="onCancel()">&times;</button>
  </div>
  <form (ngSubmit)="onSubmit()" #appointmentForm="ngForm">
    <div class="modal-body">
      <div class="form-group">
        <label for="paciente">Nombre del Paciente</label>
        <input type="text" id="paciente" name="paciente" [(ngModel)]="appointmentData.paciente" required
          placeholder="Ej: Juan PÃ©rez">
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="doctor">Doctor</label>
          <select id="doctor" name="doctor" [(ngModel)]="appointmentData.doctor" required>
            <option value="" disabled selected>Seleccionar doctor</option>
            <option *ngFor="let doctor of doctors" [value]="doctor">{{ doctor }}</option>
          </select>
        </div>
        <div class="form-group">
          <label for="tratamiento">Tratamiento</label>
          <div class="autocomplete-container">
            <input type="text" id="tratamiento" name="tratamiento" [(ngModel)]="appointmentData.tratamiento"
              (input)="onTreatmentInput()" (blur)="hideSuggestions()" required placeholder="Ej: Limpieza"
              autocomplete="off">
            <div class="suggestions-list" *ngIf="showSuggestions">
              <div *ngFor="let treatment of filteredTreatments" class="suggestion-item"
                (click)="selectTreatment(treatment)">
                {{ treatment.nombre }}
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="fecha">Fecha</label>
          <input type="date" id="fecha" name="fecha" [(ngModel)]="appointmentData.fecha" required>
        </div>
        <div class="form-group">
          <label for="hora">Hora</label>
          <input type="time" id="hora" name="hora" [(ngModel)]="appointmentData.hora" required>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn-secondary" (click)="onCancel()">Cancelar</button>
      <button type="submit" class="btn-primary" [disabled]="!appointmentForm.form.valid">Crear Cita</button>
    </div>
  </form>
</div>